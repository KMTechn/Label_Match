
============================================================
**바코드 검증 시스템 - 규칙 설정 안내 (README.txt)**
============================================================
**문서 버전: 2.0**
**작성일: 2025-07-03**

이 문서는 '바코드 검증 시스템'의 바코드 판별 규칙을 정의하는
`validation_rules.csv` 파일의 사용법을 설명합니다.

이 설정 파일을 통해 새로운 제품의 바코드 규칙을 프로그램 코드 수정 없이
직접 추가하거나 변경할 수 있습니다.

---
### **=== 1. 핵심 동작 원리 (매우 중요) ===**

시스템이 어떤 규칙(RuleName)을 적용할지는 **세트의 첫 번째 바코드를 스캔하는 순간**에 결정됩니다.

- **판단 기준**: 첫 번째로 스캔된 바코드의 **'길이 (Length)'**
- **동작 방식**: 프로그램은 `validation_rules.csv` 파일에 정의된 모든 규칙 그룹의 `ScanPosition`이 `1`인 행을 살펴봅니다. 그리고 첫 스캔된 바코드의 길이가 `MinLength`와 `MaxLength` 범위 안에 포함되는 규칙을 찾아 해당 `RuleName`을 이번 세트의 규칙으로 확정합니다.

따라서, 서로 다른 규칙 그룹의 **첫 번째 스캔(`ScanPosition: 1`)에 대한 길이 설정은 서로 겹치지 않도록** 하는 것이 매우 중요합니다.

---
### **=== 2. 파일 위치 ===**

`validation_rules.csv` 파일은 반드시 프로그램 실행 파일(예: `BarcodeScannerApp.exe`)과 **같은 폴더** 안에 있어야 합니다.

---
### **=== 3. 파일 편집 방법 ===**

- **Microsoft Excel**을 사용하여 열고 편집하는 것을 권장합니다.
- 또는 '메모장'과 같은 일반 텍스트 편집기로도 수정할 수 있습니다.
- 저장 시 **"CSV (쉼표로 분리)"** 또는 **"CSV UTF-8 (쉼표로 분리)"** 형식으로 저장해야 합니다. (프로그램이 두 형식 모두 지원합니다.)

---
### **=== 4. 규칙(CSV) 파일의 열 설명 ===**

CSV 파일의 첫 번째 줄(헤더)은 `RuleName,ScanPosition,MinLength,MaxLength,SliceStart,SliceEnd,Description`으로 구성되어야 합니다. 각 열은 다음과 같은 의미를 가집니다.

1.  **`RuleName` (규칙 이름)**
    - 특정 제품군의 규칙들을 묶어주는 고유한 그룹 이름입니다.
    - 하나의 제품은 5개의 스캔 단계(행)를 가지며, 이 5개 행의 `RuleName`은 반드시 동일해야 합니다.
    - 예: `STANDARD_A`, `NEW_PRODUCT_B`

2.  **`ScanPosition` (스캔 순서)**
    - `1`부터 `5`까지의 숫자로, 몇 번째 스캔에 적용될 규칙인지를 나타냅니다.
    - 하나의 `RuleName` 안에는 `1`부터 `5`까지의 `ScanPosition`이 각각 하나씩 반드시 존재해야 합니다.

3.  **`MinLength` / `MaxLength` (최소/최대 길이)**
    - 해당 순서에서 스캔된 바코드가 유효한 것으로 인정될 최소 및 최대 길이를 지정합니다.
    - 만약 바코드 길이가 고정되어 있다면, `MinLength`와 `MaxLength`에 같은 값을 입력합니다. (예: `13`, `13`)
    - ***※ 매우 중요: `ScanPosition`이 `1`인 행의 길이 설정은, 위 '핵심 동작 원리'에 설명된 대로 전체 규칙을 선택하는 기준으로 사용됩니다.***

4.  **`SliceStart` / `SliceEnd` (자르기 시작/끝 위치)**
    - 스캔된 바코드에서 실제 제품 코드를 추출하기 위해 잘라낼 위치를 지정합니다.
    - 컴퓨터는 숫자를 0부터 셉니다. 즉, 첫 번째 글자가 `0`번입니다.
    - **슬라이싱 원리**: `[SliceStart]` 위치부터 `[SliceEnd]` 위치 **바로 앞까지** 잘라냅니다.
    - 예시 1: `SliceStart: 0`, `SliceEnd: 13` -> `0`번부터 `12`번까지, 즉 앞에서부터 총 13개 글자를 잘라냅니다.
    - 예시 2: `SliceStart: 13`, `SliceEnd: 26` -> `13`번부터 `25`번까지, 즉 14번째 글자부터 13개 글자를 잘라냅니다.

5.  **`Description` (설명)**
    - 규칙을 쉽게 알아볼 수 있도록 메모를 남기는 공간입니다. (필수 아님)
    - 프로그램 동작에는 영향을 주지 않습니다.

---
### **=== 5. 새로운 제품 규칙 추가 방법 ===**

새로운 바코드 형식을 가진 제품이 추가되었을 때 아래 순서대로 진행하세요.

1.  `validation_rules.csv` 파일을 Excel로 엽니다.
2.  기존에 있던 규칙 5줄 (예: `STANDARD_A` 규칙 5줄)을 그대로 복사합니다.
3.  파일의 맨 아래 빈칸에 붙여넣기 합니다.
4.  새로 붙여넣은 5줄의 `RuleName`을 새로운 제품의 규칙 이름으로 모두 변경합니다. (예: `NEW_PRODUCT_B`)
5.  새로운 제품의 바코드 사양에 맞게, 5줄 각각의 `MinLength`, `MaxLength`, `SliceStart`, `SliceEnd` 값을 수정합니다.
    - 특히, **첫 번째 스캔(`ScanPosition: 1`)의 `MinLength`, `MaxLength`가 다른 규칙과 겹치지 않는지** 반드시 확인해야 합니다.
6.  파일을 저장합니다. (Excel에서 저장 시 **"CSV(쉼표로 분리)"** 형식을 유지해야 합니다.)
7.  **중요: 바코드 검증 프로그램을 완전히 종료했다가 다시 시작해야 새로운 규칙이 적용됩니다.**

---
### **※ 중요 주의사항 ※**

- 파일을 수정하기 전에, 만약을 대비해 원본 `validation_rules.csv` 파일을 다른 곳에 복사하여 **백업**해두세요.
- CSV 파일의 **첫 번째 줄(헤더)**은 절대로 수정하거나 삭제하지 마세요. (`RuleName`, `ScanPosition` 등)
- 모든 규칙은 **5줄이 한 세트**여야 하며, 같은 세트의 `RuleName`은 동일해야 합니다.
- 값을 입력할 때 셀의 값 앞뒤에 **공백**이 들어가지 않도록 주의해 주세요.